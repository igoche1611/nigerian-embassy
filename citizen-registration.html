<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Citizen Registration | Embassy of Nigeria, Prague</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Lato', sans-serif; }
        .font-heading { font-family: 'Playfair Display', serif; }
        .nigeria-green { color: #008751; }
        .nigeria-green-bg { background-color: #008751; }
        header {
            border-bottom: 4px solid #008751;
        }
        .dropdown .dropdown-content { display: none; }
        .dropdown-content { position: absolute; background-color: white; min-width: 240px; box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); z-index: 50; border-radius: 0.5rem; padding: 0.5rem 0; border-top: 3px solid #008751; }
        .dropdown-content a { color: black; padding: 12px 16px; text-decoration: none; display: block; font-size: 0.9rem; }
        .dropdown-content a:hover { background-color: #f1f1f1; }
        .main-content-bg {
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23e2e8f0' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        .card-lift-effect {
            transition: transform 0.3s ease-out, box-shadow 0.3s ease-out;
        }
        .card-lift-effect:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 40px -15px rgba(0,0,0,0.2);
        }
        .translate-button {
            position: fixed;
            top: 180px; 
            right: 20px;
            z-index: 1000;
            background-color: white;
            color: #333;
            padding: 10px 15px;
            border-radius: 50px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            text-decoration: none;
            font-size: 14px;
            font-weight: 600;
            transition: transform 0.3s ease;
        }
        .translate-button:hover {
            transform: scale(1.05);
        }
        .translate-button img {
            width: 24px;
            height: 24px;
            margin-right: 8px;
        }
        .form-input {
            transition: border-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }
        .form-input:focus {
            border-color: #008751;
            box-shadow: 0 0 0 3px rgba(0, 135, 81, 0.2);
        }
        /* Cookie Banner & Back to Top */
        #cookie-banner {
            transition: opacity 0.5s ease;
        }
        #back-to-top {
            transition: opacity 0.3s, visibility 0.3s;
        }
    </style>
</head>
<body class="bg-gray-100">

    <!-- Translate Button -->
     <a href="#" id="translate-link" class="translate-button" title="Translate to Czech">
        <img src="https://flagcdn.com/w40/cz.png" alt="Czech Flag">
        <span>Česky</span>
    </a>

    <!-- Header -->
    <header class="bg-white shadow-md sticky top-0 w-full z-20">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
            <div class="flex items-center">
                <a href="index.html" class="flex items-center space-x-3">
                    <img src="images/logo.png" alt="Nigerian Coat of Arms" class="h-12 w-12">
                    <div>
                        <h1 class="text-lg font-bold nigeria-green font-heading">Embassy of Nigeria</h1>
                        <p class="text-xs text-gray-600">Prague, Czech Republic</p>
                    </div>
                </a>
                <div class="hidden xl:flex items-center text-sm text-gray-500 ml-8 pl-8 border-l border-gray-200">
                    <i class="fas fa-clock mr-2 nigeria-green"></i>
                    <span id="prague-time"></span>
                </div>
            </div>
            <div class="hidden lg:flex items-center">
                <div class="flex items-center space-x-6 text-sm font-semibold">
                    <a href="index.html" class="text-gray-600 hover:nigeria-green">Home</a>
                    <div class="dropdown relative">
                        <button class="dropdown-toggle text-gray-600 hover:nigeria-green inline-flex items-center">About Us <i class="fas fa-chevron-down text-xs ml-2"></i></button>
                        <div class="dropdown-content">
                            <a href="ambassador.html">Ambassador's Welcome</a>
                            <a href="mission-history.html">History of the Mission</a>
                            <a href="our-team.html">Our Team</a>
                        </div>
                    </div>
                    <div class="dropdown relative">
                        <button class="dropdown-toggle text-gray-600 hover:nigeria-green inline-flex items-center">Nigeria <i class="fas fa-chevron-down text-xs ml-2"></i></button>
                        <div class="dropdown-content">
                            <a href="nigeria-history.html">History & People</a>
                            <a href="nigeria-culture.html">Culture & Tourism</a>
                            <a href="nigeria-economy.html">Economy & Investment</a>
                            <a href="nigeria-symbols.html">National Symbols</a>
                        </div>
                    </div>
                    <div class="dropdown relative">
                        <button class="dropdown-toggle nigeria-green inline-flex items-center">Services <i class="fas fa-chevron-down text-xs ml-2"></i></button>
                        <div class="dropdown-content">
                            <a href="visas.html">Visa Services</a>
                            <a href="etc.html">Emergency Travel Certificate</a>
                            <hr class="my-1">
                            <span class="block px-4 pt-2 pb-1 text-xs text-gray-500 font-semibold uppercase">Citizen Services</span>
                            <a href="citizens-identification.html">Citizen Identification</a>
                            <a href="citizen-registration.html">Citizen Registration</a>
                            <hr class="my-1">
                            <span class="block px-4 pt-2 pb-1 text-xs text-gray-500 font-semibold uppercase">Document Legalization</span>
                            <a href="age-declaration.html">Age Declaration</a>
                            <a href="change-of-profession.html">Change of Profession</a>
                            <a href="burial-permit.html">Burial Transit Permit</a>
                        </div>
                    </div>
                    <div class="dropdown relative">
                        <button class="dropdown-toggle text-gray-600 hover:nigeria-green inline-flex items-center">Press Center <i class="fas fa-chevron-down text-xs ml-2"></i></button>
                        <div class="dropdown-content">
                            <a href="news.html">Latest News</a>
                            <a href="gallery.html">Photo Gallery</a>
                        </div>
                    </div>
                    <a href="contact.html" class="text-gray-600 hover:nigeria-green">Contact Us</a>
                </div>
                <div class="flex items-center ml-6 pl-6 border-l border-gray-200">
                    <div class="hidden xl:flex items-center text-sm text-gray-600 mr-6">
                        <i class="fas fa-phone-alt mr-2 nigeria-green"></i>
                        <span>+420 220 561 040</span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <a href="https://x.com/NigeriaInPrague" class="text-gray-500 hover:nigeria-green transition-colors" title="Follow us on X"><i class="fa-brands fa-x-twitter text-xl"></i></a>
                        <a href="https://facebook.com/NigeriaInPrague" class="text-gray-500 hover:nigeria-green transition-colors" title="Follow us on Facebook"><i class="fab fa-facebook-f text-xl"></i></a>
                        <a href="https://instagram.com/NigeriaInPrague" class="text-gray-500 hover:nigeria-green transition-colors" title="Follow us on Instagram"><i class="fab fa-instagram text-xl"></i></a>
                    </div>
                </div>
            </div>
            <div class="lg:hidden">
                <button id="mobile-menu-button" class="text-gray-600 focus:outline-none"><i class="fas fa-bars text-2xl"></i></button>
            </div>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="lg:hidden hidden px-6 pb-4"></div>
    </header>

    <main>
        <!-- Page Title Header -->
        <section class="relative py-20 text-white">
            <div class="absolute inset-0 bg-cover bg-center" style="background-image: url('images/header-background.jpg');"></div>
            <div class="absolute inset-0 bg-black opacity-50"></div>
            <div class="container mx-auto px-6 relative z-10">
                <h1 class="text-4xl font-bold font-heading">Citizen Registration</h1>
                <p class="mt-2 text-lg text-gray-200">Register as a Nigerian citizen residing in the Czech Republic.</p>
            </div>
        </section>

        <!-- Content Section -->
        <div class="main-content-bg">
            <section class="py-20">
                <div class="container mx-auto px-6">
                    <div class="bg-white p-8 md:p-12 rounded-lg shadow-lg max-w-4xl mx-auto">
                        <div class="prose max-w-none text-gray-700 space-y-6">
                            <p>This portal allows Nigerian citizens residing in the Czech Republic to register their presence with the Embassy. Registration is voluntary but highly encouraged as it enables the Embassy to better serve the community, provide assistance in emergencies, and share important information.</p>
                            
                            <form id="registration-form" class="space-y-6">
                                <div>
                                    <label for="fullName" class="block text-sm font-medium text-gray-700">Full Name</label>
                                    <input type="text" id="fullName" name="fullName" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-nigeria-green focus:border-nigeria-green sm:text-sm form-input">
                                </div>
                                <div>
                                    <label for="email" class="block text-sm font-medium text-gray-700">Email Address</label>
                                    <input type="email" id="email" name="email" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-nigeria-green focus:border-nigeria-green sm:text-sm form-input">
                                </div>
                                <div>
                                    <label for="phone" class="block text-sm font-medium text-gray-700">Phone Number</label>
                                    <input type="tel" id="phone" name="phone" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-nigeria-green focus:border-nigeria-green sm:text-sm form-input">
                                </div>
                                <div>
                                    <label for="address" class="block text-sm font-medium text-gray-700">Address in Czech Republic</label>
                                    <textarea id="address" name="address" rows="3" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-nigeria-green focus:border-nigeria-green sm:text-sm form-input"></textarea>
                                </div>
                                <div>
                                    <label for="occupation" class="block text-sm font-medium text-gray-700">Occupation</label>
                                    <input type="text" id="occupation" name="occupation" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-nigeria-green focus:border-nigeria-green sm:text-sm form-input">
                                </div>
                                <div>
                                    <label for="stateOfOrigin" class="block text-sm font-medium text-gray-700">State of Origin</label>
                                    <input type="text" id="stateOfOrigin" name="stateOfOrigin" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-nigeria-green focus:border-nigeria-green sm:text-sm form-input">
                                </div>
                                <div>
                                    <button type="submit" id="submit-button" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white nigeria-green-bg hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nigeria-green disabled:opacity-50" disabled>
                                        Connecting to Service...
                                    </button>
                                </div>
                            </form>
                            <div id="message-box" class="hidden mt-4 p-4 rounded-md"></div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="nigeria-green-bg text-white pt-20 pb-10">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <div><h4 class="font-bold text-xl mb-4 font-heading">About the Embassy</h4><p class="text-sm">The Embassy of the Federal Republic of Nigeria in Prague is the official diplomatic representation of Nigeria in the Czech Republic.</p></div>
                <div><h4 class="font-bold text-xl mb-4 font-heading">Contact Information</h4><ul class="text-sm space-y-2"><li class="flex items-start"><i class="fas fa-map-marker-alt w-4 mr-3 mt-1"></i><span>Na Čihadle 32, 160 00 Praha 6, Czech Republic</span></li><li class="flex items-center"><i class="fas fa-phone-alt w-4 mr-3"></i><span>+420 220 561 040</span></li><li class="flex items-center"><i class="fas fa-envelope w-4 mr-3"></i><span>info@nigerianembassy.cz</span></li></ul></div>
                <div>
                    <h4 class="font-bold text-xl mb-4 font-heading">Consular Hours</h4>
                    <ul class="text-sm space-y-2">
                        <li><span class="font-semibold">Monday - Friday:</span> 10:00 AM - 1:00 PM</li>
                        <li><span class="font-semibold">Weekends & Public Holidays:</span> Closed</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-xl mb-4 font-heading">Our Location</h4>
                    <iframe src="https://maps.google.com/maps?q=Na%20%C4%8Cihadle%2032,%20160%2000%20Praha%206&t=&z=15&ie=UTF8&iwloc=&output=embed" width="100%" height="150" style="border:0;" allowfullscreen="" loading="lazy" class="rounded-lg"></iframe>
                </div>
            </div>
            <div class="border-t border-gray-100 opacity-50 mt-10 pt-6 text-center text-sm"><p>&copy; 2025 Embassy of Nigeria, Prague. All Rights Reserved.</p></div>
        </div>
    </footer>
    
    <!-- Back to Top Button -->
    <button id="back-to-top" class="fixed bottom-5 right-5 bg-nigeria-green text-white p-3 rounded-full shadow-lg hover:bg-green-700 transition-opacity duration-300 opacity-0 invisible">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Cookie Consent Banner -->
    <div id="cookie-banner" class="fixed bottom-0 left-0 right-0 bg-gray-800 text-white p-4 flex items-center justify-between shadow-lg opacity-0 -translate-y-full">
        <p class="text-sm">We use cookies to enhance your experience. By continuing to visit this site you agree to our use of cookies.</p>
        <button id="cookie-accept" class="bg-nigeria-green text-white py-2 px-4 rounded-lg hover:bg-green-700">Accept</button>
    </div>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

        // Your web app's Firebase configuration from your project settings
        const firebaseConfig = {
          apiKey: "AIzaSyBSr-Mi1vRlmwDcJ-rXZG58KAo6S4aT1X8",
          authDomain: "embassy-of-nigeria.firebaseapp.com",
          projectId: "embassy-of-nigeria",
          storageBucket: "embassy-of-nigeria.appspot.com",
          messagingSenderId: "812096925471",
          appId: "1:812096925471:web:5821b9a8a7b00f53bc0a2a",
          measurementId: "G-5S8DPDFPLJ"
        };
        
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        
        const submitButton = document.getElementById('submit-button');
        const messageBox = document.getElementById('message-box');

        onAuthStateChanged(auth, (user) => {
            if (user) {
                console.log("Firebase Auth ready. User:", user.uid);
                submitButton.disabled = false;
                submitButton.textContent = 'Register Now';
            } else {
                 signInAnonymously(auth).catch((error) => {
                    console.error("Anonymous sign-in failed:", error);
                    messageBox.classList.remove('hidden');
                    messageBox.classList.add('bg-red-100', 'text-red-700');
                    if (error.code === 'auth/configuration-not-found') {
                        messageBox.innerHTML = '<strong>Connection Failed:</strong> Please enable Authentication in your Firebase project. Go to your Firebase Console, click "Authentication" under the "Build" menu, click "Get started", and then enable the "Anonymous" sign-in provider.';
                    } else {
                        messageBox.textContent = 'Could not connect to registration service. Please try again.';
                    }
                    submitButton.textContent = 'Connection Failed';
                });
            }
        });

        const form = document.getElementById('registration-form');
        
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            if (!auth.currentUser) {
                console.error("Form submitted before user was authenticated.");
                messageBox.classList.remove('hidden', 'bg-green-100', 'text-green-700');
                messageBox.classList.add('bg-red-100', 'text-red-700');
                messageBox.textContent = 'Connection not ready. Please wait a moment and try again.';
                return;
            }

            submitButton.disabled = true;
            submitButton.textContent = 'Registering...';
            
            const formData = {
                fullName: form.fullName.value,
                email: form.email.value,
                phone: form.phone.value,
                address: form.address.value,
                occupation: form.occupation.value,
                stateOfOrigin: form.stateOfOrigin.value,
                registrationDate: serverTimestamp()
            };

            try {
                const docRef = await addDoc(collection(db, "registered_citizens"), formData);
                console.log("Document written with ID: ", docRef.id);
                
                messageBox.classList.remove('hidden', 'bg-red-100', 'text-red-700');
                messageBox.classList.add('bg-green-100', 'text-green-700');
                messageBox.textContent = 'Registration successful! Thank you.';
                form.reset();

            } catch (error) {
                console.error("Error adding document: ", error);
                messageBox.classList.remove('hidden', 'bg-green-100', 'text-green-700');
                messageBox.classList.add('bg-red-100', 'text-red-700');
                messageBox.textContent = 'An error occurred. Please try again.';
            } finally {
                 submitButton.disabled = false;
                 submitButton.textContent = 'Register Now';
            }
        });
    </script>
    
    <script>
        // Standard page scripts
        window.onbeforeunload = function () {
            window.scrollTo(0, 0);
        }

        document.addEventListener('DOMContentLoaded', function () {
            function updateTime() {
                const timeEl = document.getElementById('prague-time');
                if (timeEl) {
                    const now = new Date();
                    const options = { timeZone: 'Europe/Prague', weekday: 'short', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' };
                    timeEl.textContent = now.toLocaleString('en-US', options);
                }
            }
            updateTime();
            setInterval(updateTime, 1000 * 60);

            const dropdownToggles = document.querySelectorAll('.dropdown-toggle');
            dropdownToggles.forEach(toggle => {
                toggle.addEventListener('click', function(event) {
                    event.stopPropagation();
                    document.querySelectorAll('.dropdown-content').forEach(d => { if (d !== this.nextElementSibling) d.style.display = 'none'; });
                    const dropdownContent = this.nextElementSibling;
                    dropdownContent.style.display = window.getComputedStyle(dropdownContent).display === 'block' ? 'none' : 'block';
                });
            });
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const navContainer = document.querySelector('.hidden.lg\\:flex');
            
            mobileMenuButton.addEventListener('click', function(event) {
                event.stopPropagation();
                const isHidden = mobileMenu.classList.toggle('hidden');
                
                if (!isHidden && mobileMenu.innerHTML.trim() === "") {
                    mobileMenu.innerHTML = navContainer.innerHTML;
                    mobileMenu.querySelectorAll('.dropdown').forEach(dropdown => {
                        const toggle = dropdown.querySelector('.dropdown-toggle');
                        const content = dropdown.querySelector('.dropdown-content');
                        if (toggle && content) {
                            toggle.addEventListener('click', function(e) {
                                e.preventDefault();
                                e.stopPropagation();
                                mobileMenu.querySelectorAll('.dropdown-content').forEach(otherContent => {
                                    if (otherContent !== content) {
                                        otherContent.style.display = 'none';
                                    }
                                });
                                content.style.display = content.style.display === 'block' ? 'none' : 'block';
                            });
                        }
                    });
                }
            });

            document.addEventListener('click', function(event) {
                const isDesktopDropdown = event.target.closest('.dropdown');
                if (!isDesktopDropdown) {
                    document.querySelectorAll('header .dropdown-content').forEach(d => d.style.display = 'none');
                }
                const isMobileMenuClick = event.target.closest('#mobile-menu');
                const isMobileButton = event.target.closest('#mobile-menu-button');
                if (!isMobileMenuClick && !isMobileButton) {
                    mobileMenu.classList.add('hidden');
                }
            });

            const translateLink = document.getElementById('translate-link');
            if(translateLink) {
                const currentPageUrl = window.location.href;
                const googleTranslateUrl = `https://translate.google.com/translate?sl=en&tl=cs&u=${encodeURIComponent(currentPageUrl)}`;
                translateLink.href = googleTranslateUrl;
                translateLink.target = '_blank';
            }
            
            // Cookie Banner
            const cookieBanner = document.getElementById('cookie-banner');
            const cookieAccept = document.getElementById('cookie-accept');
            if (cookieBanner && cookieAccept) {
                if (!localStorage.getItem('cookie_consent')) {
                    cookieBanner.classList.remove('opacity-0', '-translate-y-full');
                }
                cookieAccept.addEventListener('click', function() {
                    localStorage.setItem('cookie_consent', 'true');
                    cookieBanner.style.display = 'none';
                });
            }


            // Back to Top Button
            const backToTopButton = document.getElementById('back-to-top');
            if(backToTopButton) {
                window.addEventListener('scroll', function() {
                    if (window.pageYOffset > 300) {
                        backToTopButton.classList.remove('opacity-0', 'invisible');
                    } else {
                        backToTopButton.classList.add('opacity-0', 'invisible');
                    }
                });
                backToTopButton.addEventListener('click', function() {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            }
        });
    </script>
</body>
</html>

